<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<ScrollPane xmlns="http://javafx.com/javafx/24.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.companycore.controller.calendar.CalendarController"
            fitToWidth="true"
            style="-fx-background-color: transparent;">

    <VBox spacing="15" style="-fx-padding: 15;">
        <!-- 상단 헤더 -->
        <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-padding: 0 0 15 0;">
            <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="캘린더" />
        </HBox>

        <!-- 메인 콘텐츠 -->
        <HBox spacing="15" VBox.vgrow="NEVER">
            <!-- 좌측 - 달력 -->
            <VBox spacing="15" HBox.hgrow="ALWAYS">
                <VBox style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" VBox.vgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 0 0 15 0;">
                        <Label fx:id="calendarTitle" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="August 2025" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="prevMonthButton" onAction="#handlePrevMonth" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 12;" text="◀" />
                        <Button fx:id="nextMonthButton" onAction="#handleNextMonth" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 12;" text="▶" />
                    </HBox>

                    <!-- 요일 헤더 -->
                    <GridPane fx:id="calendarGrid" hgap="3" vgap="3" style="-fx-padding: 10;">
                        <Label prefHeight="34.0" prefWidth="55.0" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-padding: 8; -fx-alignment: center; -fx-background-color: #f8f9fa; -fx-background-radius: 5;" text="월" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <Label prefHeight="34.0" prefWidth="55.0" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-padding: 8; -fx-alignment: center; -fx-background-color: #f8f9fa; -fx-background-radius: 5;" text="화" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        <Label prefHeight="34.0" prefWidth="55.0" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-padding: 8; -fx-alignment: center; -fx-background-color: #f8f9fa; -fx-background-radius: 5;" text="수" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                        <Label prefHeight="34.0" prefWidth="55.0" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-padding: 8; -fx-alignment: center; -fx-background-color: #f8f9fa; -fx-background-radius: 5;" text="목" GridPane.columnIndex="3" GridPane.rowIndex="0" />
                        <Label prefHeight="34.0" prefWidth="55.0" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-padding: 8; -fx-alignment: center; -fx-background-color: #f8f9fa; -fx-background-radius: 5;" text="금" GridPane.columnIndex="4" GridPane.rowIndex="0" />
                        <Label prefHeight="34.0" prefWidth="55.0" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-padding: 8; -fx-alignment: center; -fx-background-color: #f8f9fa; -fx-background-radius: 5;" text="토" GridPane.columnIndex="5" GridPane.rowIndex="0" />
                        <Label prefHeight="34.0" prefWidth="55.0" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-padding: 8; -fx-alignment: center; -fx-background-color: #f8f9fa; -fx-background-radius: 5;" text="일" GridPane.columnIndex="6" GridPane.rowIndex="0" />
                        <columnConstraints>
                            <ColumnConstraints />
                            <ColumnConstraints />
                            <ColumnConstraints />
                            <ColumnConstraints />
                            <ColumnConstraints />
                            <ColumnConstraints />
                            <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints />
                        </rowConstraints>
                        <!-- 날짜들은 동적으로 생성됨 -->
                    </GridPane>

                    <!-- 선택된 날짜 정보 -->
                    <VBox fx:id="selectedDateInfo"
                          spacing="3"
                          style="-fx-padding: 6 8; -fx-background-color: #ecf0f1; -fx-background-radius: 5;"
                          visible="false">
                        <Label fx:id="selectedDateLabel"
                               style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: #2c3e50;" />
                        <Label fx:id="selectedDateScheduleCount"
                               style="-fx-font-size: 11px; -fx-text-fill: #7f8c8d;" />
                    </VBox>
                </VBox>
            </VBox>

            <!-- 우측 - 다가오는 일정 -->
            <VBox spacing="15" style="-fx-min-width: 280;" HBox.hgrow="NEVER">
                <VBox style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" VBox.vgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 0 0 15 0;">
                        <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="다가오는 일정" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="refreshUpcomingButton" onAction="#handleRefreshUpcoming" style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 5 10;" text="새로고침" />
                    </HBox>

                    <VBox fx:id="upcomingSchedulesContainer" spacing="10">
                        <!-- 동적으로 생성되는 다가오는 일정들 -->
                    </VBox>
                </VBox>
            </VBox>
        </HBox>

        <!-- 하단 - 회의록 -->
        <VBox style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2); -fx-min-height: 200;">
            <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 0 0 15 0;">
                <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="최신 회의록" />
                <Button fx:id="refreshMeetingsButton" onAction="#handleRefreshMeetings" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 16;" text="새로고침" />
            </HBox>

            <HBox spacing="20">
                <VBox fx:id="meetingNotesContainer" spacing="15" HBox.hgrow="ALWAYS">
                    <!-- 동적으로 생성되는 회의록 항목들 -->
                </VBox>
            </HBox>
        </VBox>
    </VBox>
</ScrollPane>